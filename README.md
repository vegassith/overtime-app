# Overtime App

## Key requirement: company needs documentation that salaried employees did or did not get overtime each week

## Models:
- ~~Post -> date:date rationale:text~~
- ~~User -> Devise~~
- ~~AdminUser -> STI of User~~
- ~~AuditLog~~

## Features:
- ~~Approval Workflow~~
  - ~~Status to post~~
     - ~~submitted~~
     - ~~rejected~~
     - ~~approved~~
  - ~~status required~~
  - ~~status default value~~
  - ~~implement approval stages~~
  - ~~Locking Posts~~
- SMS Sending (Twillo) -> Link to approval or overtime input
- ~~Administrate -> Admin Dashboard~~
- ~~Block Non admin users and guest users~~
- ~~Email Summary to mangers for approval~~
- ~~Needs to be documented if employee did not log an overtime~~
- ~~Create audit log for each text message~~
- ~~Need to update end_date when confirmed~~
- ~~Need to update audit log status when a overtine is rejected~~
- ~~Add Home Icon~~
- ~~Update button date on home page to have time span~~
- ~~Update button sort order~~
- ~~Remove unnecessary nav bar buttons for Manager~~
- ~~Fix admin dashboard bug~~
- ~~Implement honeybadger for error reporting~~
- ~~Implement New Relic for keeping server loaded Used Honeybadger~~ 

## UI:
- ~~Boostrap -> formatting~~
- ~~Icons from Font Awesome~~
- ~~Update the styles for forms~~

## SMS Sending
- ~~Schedule to run at Sunday at 5pm~~
  - ~~Use whenever to schedule job~~
- ~~Iterate over all employees~~
- ~~Skip AdminUsers~~
- ~~Send a messages that has instructions and a link to log time~~
- ~~Integrate validation for phone attr in Users:~~
  - ~~No spaces or dashes for Phone Number~~
  - ~~has to be 10 characters~~
  - ~~has to be numeric~~

## Manager Email
- ~~Iterate over the list of pending overtime requests~~
- ~~Check to usee if there are any requests~~
- ~~Iterate over the list of admin users/managers~~
- ~~Send the email to each admin~~

## AuditLog
- ~~Keep track of if an employee had overtime or not~~
- ~~Dependecies:~~
  - ~~User~~
- ~~Attrs:~~
  - ~~user:references~~
  - ~~Status:integer (enum) -> pending, complete~~
  - ~~start_date:date -> default previous Monday~~
  - ~~date_verified~~
 
## Refactor TODOS:
- ~~Refactor user assocation integration test in post_spec~~
- ~~Add full name method~~
- ~~Refactor posts/_form for admin user with status~~
- ~~Refactor nav bar for current_user bloack and AdminUser Dashboard link~~
- ~~Fix post_spec to use factories~~

## New Enhancement 
- ~~Upgrade to Rails 5 (Already done)~~
- ~~Manager/Employee Relation~~
  - ~~Create a parent/child relation between managers and employees.~~
- ~~Add company to `employee`~~
  - ~~New attr~~
- Create staging server
  - Can also be on Heroku
- Reporting engine
  - Reports generated by date range search.
- ~~Last four of SSN~~
  - ~~New parameter to be added to `User`~~
- ~~Mobile friendly~~
- Refactor admin user call bug
  - Logic left in view, use policy:
- Password field fix for User creation bug
  - Update field to hide values
- Code review 
  - Security and best practices.
- Add full set of hours
  - Change overtime_request to hours
  - Find/Replace all instances of overtime_request
  - Create new attr for `posts` that will have all hours for a `users` day
- ~~Search bug with Administrate bug~~
  - ~~```Puma caught this error: undefined method `strip' for #<Array:0x007fa1df842500> (NoMethodError)```~~
- Add Twilio config vars to Heroku bug
- Send SMS message daily 
  - Check to see if an employee has logged time from the day before (M-F), if they have no logged their time by 8am, send a SMS.
- Calculate overtime hours for salaried employees 
  - Equation
  - ((Weekly salary / total weekly hours) / 2) * hours of overtime that week)
  - Example:
  - ((1,000/43) / 2) * 3 = 34ish
- Swap out rationale for work performed 
  - In the `Post` model
- Fix failing test for features/post_spec bug
- Encrypting the SSN 
- Integrate date range search bar for posts 
- Connect SalariedOvertimeCalculator module to workflow 
  - Equation
  - ((Weekly salary / total weekly hours) / 2) * hours of overtime that week)
  - Example:
  - ((1,000/43) / 2) * 3 = 34ish
- Build in logic into SMS scheduler 
  - Have message sent the next day, only if employee has not logged time.
- Fix FakeSms duplicate method call
- Blocking users from accessing audit logs bug
  - Based on student message
  - Policy issue with /audit_logs
- SMS Bug bug
  - Sends only on Sundays, should be reversed.
- New fields for `posts` 
  - On call attr
  - Call out attr
  - Signature
- File upload 